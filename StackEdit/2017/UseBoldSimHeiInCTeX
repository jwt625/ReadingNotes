
[toc]

## Problem

Tsinghua requires the subtitle of undergrad thesis to be in Bold SimHei, but in the current version of [THUThesis](https://github.com/xueruini/thuthesis) template it's SimHei, not Bold SimHei (might be fixed when you read this).

The easiest way to do it is to make the cover in Word, convert it to pdf and replace the old cover. I don't want to do it in this way because I can't learn anything through it.

Firstly I have to find out where THUThesis defines and describes the cover, etc.

## Modify THUThesis

`thuthesis.cfg` defines commands that stand for some common content, such as the content on the cover page and on the authorization page. You can find `\thu@bachelor@subtitle` in it.

`thuthesis.cls` describes the detailed layout and style information of those common content. You can find `\thu@bachelor@subtitle` in it with some format commands around, as in the following figure. You can see that the subtitle is set to be xiaochu and in heiti (command `\heiti` is defined by CTeX) with 0.5 ziju.

![modification-in-thuthesis.cls](https://lh3.googleusercontent.com/-cPchCUVnaQg/WT4xpV4i1_I/AAAAAAAAACI/0Cv-acUlypoLPC82igsz_BsRQNZzZ7lzQCLcB/s0/modification.png "modification in thuthesis.cls")

I modified the original command (in red) to some new command (in green). I firstly tried directly adding `\textbf` so that I expect Bold SimHei would be used. However, I saw the following warning message:
```
[no file]:54: LaTeX Font Warning: Font shape `TU/SimHei(0)/b/n' undefined(Font)              using `TU/SimHei(0)/m/n' instead on input line 54.
```

The problem is that SimHei we usually have on Windows is Zhongyi SimHei(中易黑体) and does not come with bold or italic version, while in contrast Microsoft YaHei has a bold version. The installed fonts can be found in control panel as in the following figure. But in Microsoft Word we can indeed 'bold' words in SimHei, in this case that's an 'electronic' bold generated by Word, I think, not a bold version of the font itself.

![fontsInControlPanel](https://lh3.googleusercontent.com/-LIUT9j_4CFo/WT4y6_b3R9I/AAAAAAAAACU/ANKfcge7pwUNcsuiDqVNBBEwn6UOUSUIQCLcB/s0/fontsInControlPanel.png "fontsInControlPanel.png")

Next, I naively thought YaHei might look similar to SimHei so I include the YaHei font in `main.tex` by CTeX command `\newCJKfontfamily\msyh{Microsoft YaHei}` and use `\msyh\textbf` in `thuthesis.cls`, as on the line 521. The result didn't even make me satisfied, not to mention those 'tough' administrative stuff.

The final solution I found is to create the Bold SimHei font by my self (actually partly bold to save time) and use it. I called it SimHeiBoldTmp and included it in main.tex by `\newCJKfontfamily\htbd{SimHeiBoldTmp}`, hence the final changes in `thuthesis.cls` is as in figure 1 (note the `\textbf` command is not required since the font itself is bold. It's still an ugly solution since I haven't figure out the correct way to add a bold version subset to an existing font).



## Edit font and use new font

As Word can generate the bold version of an existing font, we can also do it. I use [fontforge](http://fontforge.github.io/en-US/) for this purpose. It has detailed documents about editing fonts (e.g., [how to bold](http://designwithfontforge.com/en-US/Bold_and_Other_Weights.html)). I believe you could figure out how to bold an existing font after playing with it for 5min. If you didn't, it's in Element->Style->Change Weight. Embolden by 6 em units is approximately proper for SimHei by comparing the effect between Bold SinHei in Word.

It is time consuming to 'bold' all the characters, so I just 'bold' the characters I need and character ' 中' for confirming the change in preview. I found the unicode of the characters I need in some online converter such as [this one](http://www.pinyin.info/tools/converter/chars2uninumbers.html) so that I could locate those characters in fontforge.

I saved the new font as SimHeiBoldTmpp.ttf and the preview looks like this (you can see the character '中' is changed):
![SimHeiBoldPreview](https://lh3.googleusercontent.com/-kzXiZcLluu4/WT44xuUxwnI/AAAAAAAAADA/IluEV-Z806IbPyStvaUvSokhdOOXZfluQCLcB/s0/SimHeiBoldPreview.png "SimHeiBoldPreview")

After installing the new font, you should be able to find and use it in Word and also tex, such as the following test .tex file:
```tex
\documentclass{ctexart}
\setCJKmainfont[BoldFont={* Bold}]{Microsoft YaHei}
\newCJKfontfamily\htbd{SimHeiBoldTmp} %include the new SinHeiBoldTmp font as \htbd
\begin{document}
\Huge
雅黑 综合论文
\textbf{雅黑粗 综合论文}

{\heiti 黑体 综合论文}

{\htbd 黑体 综合论文}

{\heiti \textbf 黑体 综合论文}
\end{document}
```
The result is:
![testResult](https://lh3.googleusercontent.com/-AZ_E1-9Zgyo/WT429GPNkFI/AAAAAAAAACs/3-sXckKdMq8owSj2c22JnYgX_qQcYcJtACLcB/s0/testResult.png "testResult")
where the last line of the document generates the same 'font undefined' error and ordinary SimHei shows up.

Finally, I could include the font in `main.tex` for my thesis by `\newCJKfontfamily\htbd{SimHeiBoldTmp}` and the modified `thuthesis.cls` file to use bold SimHei for the subtitle.

Below is the comparison between old cover, new cover and the example cover
![comparison](https://lh3.googleusercontent.com/-SRBhlYabqoM/WT47axiFbxI/AAAAAAAAADQ/ofpWdLLVLf8HIBrg7XCEnGMEwB9wzIDZwCLcB/s0/comparison.png "comparison")

> Written with [StackEdit](https://stackedit.io/).